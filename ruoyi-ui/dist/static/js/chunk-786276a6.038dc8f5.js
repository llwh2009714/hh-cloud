(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-786276a6"],{"1dad":function(t,e,n){"use strict";n.d(e,"j",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return r})),n.d(e,"h",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"l",(function(){return c})),n.d(e,"k",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"i",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return b}));var a=n("b775");function o(t){return Object(a["a"])({url:"/nonbidding/pro/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/nonbidding/plan/"+t,method:"get"})}function l(t){return Object(a["a"])({url:"/nonbidding/pro/"+t,method:"get"})}function r(t){return Object(a["a"])({url:"/nonbidding/items/getItemsDevice",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/nonbidding/pro/selectQuotation",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/nonbidding/pro/selectCom",method:"get",params:{aid:t}})}function c(t){return Object(a["a"])({url:"/nonbidding/pro",method:"put",data:t})}function d(t){return Object(a["a"])({url:"/nonbidding/pro/list1",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/nonbidding/pro/addCom",method:"post",data:t,headers:{isRepeatSubmit:!0}})}function f(t){return Object(a["a"])({url:"/basic/contract/list1",method:"get",params:t})}function p(t){return Object(a["a"])({url:"/basic/contract/del1",method:"get",params:{eid:t}})}function b(t){return Object(a["a"])({url:"/nonbidding/pro/delByGfId",method:"delete",params:{gfId:t}})}},7456:function(t,e,n){"use strict";n.d(e,"m",(function(){return o})),n.d(e,"q",(function(){return i})),n.d(e,"f",(function(){return l})),n.d(e,"o",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"k",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"p",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"l",(function(){return f})),n.d(e,"u",(function(){return p})),n.d(e,"t",(function(){return b})),n.d(e,"j",(function(){return h})),n.d(e,"v",(function(){return g})),n.d(e,"h",(function(){return w})),n.d(e,"a",(function(){return y})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return C})),n.d(e,"i",(function(){return j})),n.d(e,"s",(function(){return S})),n.d(e,"g",(function(){return T})),n.d(e,"r",(function(){return x}));var a=n("b775");function o(t){return Object(a["a"])({url:"/ppm/device/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/ppm/items/selectItemsDevice",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/basic/management",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/basic/management/list",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/basic/contract",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/basic/contract/"+t,method:"get"})}function c(t){return Object(a["a"])({url:"/basic/inventory/list",method:"get",params:t})}function d(t){return Object(a["a"])({url:"/basic/payment/list",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/basic/sign/list1",method:"get",params:t})}function f(t){return Object(a["a"])({url:"/basic/management/"+t,method:"get"})}function p(t){return Object(a["a"])({url:"/basic/management",method:"put",data:t})}function b(t){return Object(a["a"])({url:"/basic/contract",method:"put",data:t})}function h(t){return Object(a["a"])({url:"/basic/contract/selectCom",method:"get",params:{eid:t}})}function g(t){return Object(a["a"])({url:"/basic/contract/updateoHstatus",method:"put",data:t})}function w(t){return Object(a["a"])({url:"/basic/contract/del",method:"get",params:{eid:t}})}function y(t){return Object(a["a"])({url:"/basic/contract/HtCancel",method:"put",data:t})}function v(t){return Object(a["a"])({url:"/basic/management/XyCancel",method:"get",params:{oid:t}})}function C(t){return Object(a["a"])({url:"/ppm/framework/XyCancel",method:"get",params:{oid:t}})}function j(t){return Object(a["a"])({url:"/basic/management/delXy",method:"get",params:{oid:t}})}function S(t){return Object(a["a"])({url:"/ppm/framework/upOidbyOid",method:"put",data:t})}function T(t){return Object(a["a"])({url:"/basic/contract/noTender",method:"post",data:t})}function x(t){return Object(a["a"])({url:"/bidding/candidate/getSuppHid",method:"get",params:{sid:t}})}},d991:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"con"},[n("h2",[t._v("基本信息")]),n("el-divider",{attrs:{direction:"horizontal"}}),n("el-form",{ref:"elForm",attrs:{model:t.form,rules:t.rules1,size:"medium","label-width":"180px","label-position":"left"}},[n("h3",[t._v("非招标基本信息")]),n("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",justify:"space-between",align:"top",gutter:15}},[n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"项目名称",prop:"gName"}},[0===t.form.gRelease?n("el-input",{staticClass:"cInput",attrs:{clearable:""},model:{value:t.form.gName,callback:function(e){t.$set(t.form,"gName",e)},expression:"form.gName"}}):n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.gName,callback:function(e){t.$set(t.form,"gName",e)},expression:"form.gName"}})],1),n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"项目编号",prop:"gCode"}},[n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.gCode,callback:function(e){t.$set(t.form,"gCode",e)},expression:"form.gCode"}})],1),n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"采购方式",prop:"gTendertype"}},[n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.gTendertype,callback:function(e){t.$set(t.form,"gTendertype",e)},expression:"form.gTendertype"}})],1),n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"公司",prop:"eType"}},[n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.gCompany,callback:function(e){t.$set(t.form,"gCompany",e)},expression:"form.gCompany"}})],1),n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"创建人",prop:"createBy"}},[n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.createBy,callback:function(e){t.$set(t.form,"createBy",e)},expression:"form.createBy"}})],1),n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"创建部门",prop:"createDept"}},[n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.createDept,callback:function(e){t.$set(t.form,"createDept",e)},expression:"form.createDept"}})],1),n("el-form-item",{staticClass:"cInput",staticStyle:{width:"45%"},attrs:{label:"目标供应商",prop:"gUnit",clearable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{staticClass:"cInput",attrs:{clearable:"",readonly:""},model:{value:t.form.gUnit,callback:function(e){t.$set(t.form,"gUnit",e)},expression:"form.gUnit"}},[0===t.form.gRelease?n("i",{staticClass:"el-icon-search",staticStyle:{"margin-top":"10px"},attrs:{slot:"suffix"},on:{click:function(e){return t.openGys()}},slot:"suffix"}):t._e()]),n("el-dialog",{attrs:{title:"产品名称",visible:t.GysDialog},on:{"update:visible":function(e){t.GysDialog=e}}},[n("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.supplierList,"highlight-current-row":""},on:{"row-click":t.handleRowClick1}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),n("el-table-column",{attrs:{prop:"hName",label:"委托方名称",width:"140"}}),n("el-table-column",{attrs:{prop:"hSignPhone",label:"电话",width:"130"}}),n("el-table-column",{attrs:{prop:"hQuality",label:"企业性质",width:"150"}}),n("el-table-column",{attrs:{prop:"hRange",label:"经营范围"}})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total1>0,expression:"total1>0"}],attrs:{total:t.total1,page:t.queryParams1.pageNum,limit:t.queryParams1.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams1,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams1,"pageSize",e)},pagination:t.selectGysList}}),n("el-button",{on:{click:t.rest}},[t._v("清空")])],1)]}}])})],1)],1),n("h3",[t._v("合同标的清单")]),n("div",{staticClass:"cl"},[n("el-table",{style:{marginTop:"10px"},attrs:{data:t.lTableData,"row-key":function(t){return t.id},border:"",stripe:""},on:{"selection-change":t.lHandleSelectionChange}},[n("el-table-column",{attrs:{label:"序号",prop:"id",width:"60"}}),n("el-table-column",{attrs:{label:"产品名称",prop:"inName",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.inName,callback:function(n){t.$set(e.row,"inName",n)},expression:"scope.row.inName"}})]}}])}),n("el-table-column",{attrs:{label:"产品编码",prop:"tid",width:"163"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.tid,callback:function(n){t.$set(e.row,"tid",n)},expression:"scope.row.tid"}})]}}])}),n("el-table-column",{attrs:{label:"规格型号",prop:"inModel"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.inModel,callback:function(n){t.$set(e.row,"inModel",n)},expression:"scope.row.inModel"}})]}}])}),n("el-table-column",{attrs:{label:"单位",prop:"inUnit",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.inUnit,callback:function(n){t.$set(e.row,"inUnit",n)},expression:"scope.row.inUnit"}})]}}])}),n("el-table-column",{attrs:{label:"含税单价",prop:"inVat",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.inVat,callback:function(n){t.$set(e.row,"inVat",n)},expression:"scope.row.inVat"}})]}}])}),n("el-table-column",{attrs:{label:"数量",prop:"inCount",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.inCount,callback:function(n){t.$set(e.row,"inCount",n)},expression:"scope.row.inCount"}})]}}])}),n("el-table-column",{attrs:{label:"小计",prop:"inSubtotal",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.inSubtotal,callback:function(n){t.$set(e.row,"inSubtotal",n)},expression:"scope.row.inSubtotal"}})]}}])})],1),n("div",{style:{textAlign:"right"}},[n("span",{style:{marginRight:"100px"}},[t._v("总价:")]),n("span",{style:{fontWeight:"700"}},[t._v(t._s(t.lTotalSubtotal.toFixed(2)))])])],1),t.show?t._e():n("h3",[t._v("供应商报价信息")]),t.show?t._e():n("div",{staticClass:"cl"},[n("el-button",{attrs:{disabled:2===this.form.gRelease},on:{click:t.bAddRow}},[t._v("新增")]),n("el-button",{attrs:{disabled:2===this.form.gRelease},on:{click:t.bDeleteRows}},[t._v("删除")]),n("el-button",{attrs:{disabled:2===this.form.gRelease},on:{click:t.bCopyRows}},[t._v("复制")]),n("el-table",{style:{marginTop:"10px"},attrs:{data:t.ComQuotation,"row-key":function(t){return t.id},border:"",stripe:""},on:{"selection-change":t.bHandleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.selectable}}),n("el-table-column",{attrs:{label:"序号",prop:"id",width:"80"}}),n("el-table-column",{attrs:{label:"供应商名称",prop:"hName",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.hName,callback:function(n){t.$set(e.row,"hName",n)},expression:"scope.row.hName"}})]}}],null,!1,3259967818)}),n("el-table-column",{attrs:{label:"报价次数",prop:"bjSecond",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{readonly:""},model:{value:e.row.bjSecond,callback:function(n){t.$set(e.row,"bjSecond",n)},expression:"scope.row.bjSecond"}})]}}],null,!1,701602973)}),n("el-table-column",{attrs:{label:"报价金额",prop:"bjTotal"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.gRelease?n("el-input",{attrs:{readonly:""},on:{blur:function(n){return t.bHandleBlur(e.row)},input:function(n){return t.bHandleInput(e.row)}},model:{value:e.row.bjTotal,callback:function(n){t.$set(e.row,"bjTotal",n)},expression:"scope.row.bjTotal"}}):n("el-input",{on:{blur:function(n){return t.bHandleBlur(e.row)},input:function(n){return t.bHandleInput(e.row)}},model:{value:e.row.bjTotal,callback:function(n){t.$set(e.row,"bjTotal",n)},expression:"scope.row.bjTotal"}})]}}],null,!1,1951199473)})],1)],1),n("div",[2!==this.form.gRelease?n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.addBj}},[t._v("添加")]):t._e()],1),n("h3",[t._v("合同签署文件")]),n("el-form",{ref:"elForm1",attrs:{model:t.form,size:"medium","label-width":"180px","label-position":"left"}},[n("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",justify:"space-between",align:"top",gutter:15}},[n("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"附件上传",prop:"ComPubAttachments"}},[n("el-upload",{ref:"up2",staticClass:"upload-demo",attrs:{action:t.url,"before-remove":t.beforeRemove2,"auto-upload":!1,limit:3,"on-exceed":t.handleExceed2,"on-success":t.success2,"on-change":t.onchange2,"file-list":t.fileList2,disabled:2===this.form.gRelease}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传附件")])],1)],1)],1)],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{size:"medium"},on:{click:t.back1}},[t._v("返回")]),2!==this.form.gRelease?n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.faBu}},[t._v("完成")]):t._e()],1)])},o=[],i=n("5530"),l=n("b85c"),r=n("2909"),s=(n("99af"),n("4de4"),n("caad"),n("a15b"),n("d81d"),n("14d9"),n("13d5"),n("fb6a"),n("a434"),n("b0c0"),n("b680"),n("d3b7"),n("ac1f"),n("2532"),n("3ca3"),n("5319"),n("159b"),n("ddb0"),n("1dad")),u=n("7456"),c=(n("a18c"),n("37b4")),d={data:function(){return{ff:!1,GysDialog:!1,total1:0,show:!1,gTenderTypes:[],url:"/prod-api/basic/supplier/upload1",gid:this.$route.query.gid,XyOptions:[{value:1,label:"邀请"},{value:2,label:"公开"}],lTableData:[],total:0,queryParams:{pageNum:1,pageSize:10,tName:null,tUnit:null,shui:null,tModel:null,tPrice:null,tid:null},deviceList:[],sub:"",cpDialog:!1,lTotalSubtotal:0,lTableColumns:[],lSelectedRows:[],cgValue:"",loading:!0,title:"",open:!1,form:{gName:null,gCode:null,gIsPublic:null,gSpawnTime:null,xyId:null,gid:null,gCompany:null,gTendertype:null,gTimeon:null,gDeadline:null,createBy:null,createDept:null,gRelease:null,gUnit:null,hid:null,gNotes:null},rules1:{gUnit:[{required:!0,message:"请选择委托人",trigger:"blur"}]},selectRow:null,fileList2:[],ComPubAttachments:{anSize:null,anUrl:null,anName:null},aid:null,gfId:null,ComQuotation:[],info:{gid:null,hid:null,gRelease:null,comPubAttachments:{anId:null,aid:null,anName:null,anUrl:null}},chuan:[],show1:!1,queryParams1:{pageNum:1,pageSize:10,hName:null,hid:null,hQuality:null},supplierList:[],hid:null,bSelectedRows:[],bTableColumns:[],info1:{gid:null,gRelease:null,hid:null}}},mounted:function(){this.lCalculateTotalSubtotal(),this.getList()},created:function(){var t=this;this.getDicts("bs_contract_pay").then((function(e){t.payTypes=e.data}))},methods:{onchange2:function(t,e){this.fileList2=e,console.log("--------------"),0===t.size&&(this.$message.error("选择的文件不能为空，请重新选择！"),this.fileList2.splice(this.fileList2.indexOf(t[0]),1))},faBu:function(){var t=this;this.info1.gid=this.gid,this.info1.gRelease=2,Object(s["l"])(this.info1).then((function(e){t.$message.success(e.msg),t.$router.push("/noTender/project")})).catch((function(e){t.$message.error("发布失败")}))},addXy:function(){var t=this;this.$confirm("提交后不可再修改！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])(t.ComQuotation).then((function(t){})).catch((function(e){t.$message.error(e)}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))},addXy1:function(){var t=this;this.$refs.elForm.validate((function(e){if(!e)return t.$message.error("请填写完整信息"),!1;var n;0===t.fileList2.length?t.$message.warning("请上传附件"):t.hasNewFiles()?(console.log(1),(n=t.chuan).push.apply(n,Object(r["a"])(t.fileList2)),t.$refs.up2.submit()):t.add()}))},hasNewFiles:function(){var t,e=Object(l["a"])(this.fileList2);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!n.url)return!0}}catch(a){e.e(a)}finally{e.f()}return!1},add:function(){var t=this;this.info.gRelease=1,this.info.comPubAttachments.anUrl=this.chuan.map((function(t){return t.response?t.response.data.url:t.url})).join(","),this.info.comPubAttachments.anName=this.chuan.map((function(t){return t.response?t.response.data.name:t.name})).join(","),console.log(this.info,"this.info"),Object(s["l"])(this.info).then((function(e){t.$message.success(e.msg),t.$router.push("/noTender/project")})).catch((function(e){t.$message.error("提交失败")}))},handleExceed2:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeRemove2:function(t,e){var n=this;return this.$modal.confirm("确定移除 ".concat(t.name,"？")).then((function(){n.fileList2=e,n.$message.success("删除成功!")}))},success2:function(t,e){this.add()},getList:function(){var t=this;Object(s["g"])(this.gid).then((function(e){return t.ComQuotation.gfId=e.data.gCode,t.aid=e.data.xyId,t.hid=e.data.hid,t.ComQuotation.hid=e.data.hid,t.info.comPubAttachments.aid=e.data.xyId,t.info.gid=e.data.gid,t.form=e.data,0===e.data.gRelease&&(t.show=!0),3==e.data.gTendertype?t.form.gTendertype="询价":5==e.data.gTendertype?t.form.gTendertype="竞争性谈判":4==e.data.gTendertype?t.form.gTendertype="委托":6==e.data.gTendertype&&(t.form.gTendertype="单一来源"),1==e.data.gIsPublic?t.form.gIsPublic="公开":t.form.gIsPublic="邀请",t.form.gCompany="XX科技有限公司",t.gfId=t.form.gCode,t.getComPubAttachments(),Promise.all([Object(s["f"])(t.aid),Object(s["h"])({gfId:t.gfId})])})).then((function(e){return t.form.createBy=e[0].data.createBy,t.form.createDept=e[0].data.aCreateDept,console.log(e[1],"res[1].rows"),null===e[1].rows?t.form.gUnit=null:(t.ComQuotation=e[1].rows,t.form.gUnit=e[1].rows[0].bsSupplier.hName,t.ComQuotation.forEach((function(t,n){t.hName=e[1].rows[0].bsSupplier.hName,n<e[1].rows.length&&e[1].rows.forEach((function(t,e){t.id=e+1}))}))),Object(s["e"])({aid:t.aid})})).then((function(e){e.rows.forEach((function(e,n){t.lTableData.push({id:n+1,inName:e.ppmDevice.tName,inModel:e.ppmDevice.tModel,inVat:(1.13*e.ppmDevice.tPrice).toFixed(2),inUnit:e.ppmDevice.tUnit,inSubtotal:(e.vCount*e.ppmDevice.tPrice*1.13).toFixed(2),tid:e.tid,inCount:e.vCount}),t.lTotalSubtotal+=e.vCount*e.ppmDevice.tPrice*1.13.toFixed(2)})),t.selectGysList()}))},addBj:function(){var t=this;this.$confirm("确定添加本次新增报价信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(0===t.ComQuotation.length)return t.$message({type:"warning",message:"报价金额不能为空"}),!1;Object(s["c"])(t.form.gCode).then((function(e){t.ComQuotation.forEach((function(e){e.bjHid=t.hid,e.gfId=t.form.gCode,Object(s["a"])(e).then((function(e){t.$message({type:"success",message:"添加成功"}),t.$router.push("/noTender/project")}))}))}))})).catch((function(){t.$message({type:"info",message:"已取消添加"})}))},selectable:function(t,e){return 2===t.gRelease},getComPubAttachments:function(){var t=this;Object(s["d"])(this.aid).then((function(e){if(console.log(e,"res"),null!=e.data)if(t.info.comPubAttachments.anId=e.data.anId,e.data.anName&&e.data.anUrl){for(var n=e.data.anName.split(","),a=e.data.anUrl.split(","),o=[],i=0;i<n.length;i++)o.push({name:n[i],url:a[i]});t.fileList2=o,t.info.comPubAttachments.anName=e.data.anName,t.info.comPubAttachments.anUrl=e.data.anUrl}else t.fileList2=[],t.info.comPubAttachments.anName=null,t.info.comPubAttachments.anUrl=null;else t.info.comPubAttachments.anId=null,t.fileList2=[],t.info.comPubAttachments.anName=null,t.info.comPubAttachments.anUrl=null}))},selectGysList:function(){var t=this;Object(c["c"])(this.queryParams1).then((function(e){t.supplierList=e.rows,t.total1=e.total}))},spCountBlur:function(t){null==t.inVat&&(t.inVat=0),t.inSubtotal=(t.inCount*t.inVat).toFixed(2),this.lCalculateTotalSubtotal()},spCountChange:function(t){null==t.inVat&&(t.inVat=0),t.inSubtotal=(t.inCount*t.inVat).toFixed(2),this.lCalculateTotalSubtotal()},lCalculateTotalSubtotal:function(){var t=this;this.lTotalSubtotal=this.lTableData.reduce((function(e,n){var a=n.inSubtotal?parseFloat(n.inSubtotal):0,o=e+a;return t.form.eAmount=o.toFixed(2),t.qsFormData.gnPbamount=o.toFixed(2),o}),0)},selectBdList:function(){var t=this;Object(u["m"])(this.queryParams).then((function(e){t.deviceList=e.rows,t.total=e.total}))},selectSupplier:function(){var t=this;getOperator(this.hid).then((function(e){var n=e.data;t.qsFormData.gnPbcontact=n.ywName,t.qsFormData.gnPbcif=n.ywPhone})),getSupplier(this.hid).then((function(e){var n=e.data;t.qsFormData.gnPbname=n.hName,t.qsFormData.gnPbaddress=n.hAddress,t.qsFormData.gnPbbank=n.hBankAddress,t.qsFormData.gnPbaccount=n.hAccount,t.qsFormData.gnPbid=n.hid,t.form.hid=n.hid}))},handleRowClick:function(t){this.selectRow.inName=t.tName,this.selectRow.tid=t.tid,this.selectRow.inModel=t.tModel,this.selectRow.inUnit=t.tUnit,this.selectRow.tid=t.tid,this.selectRow.inVat=(1.13*t.tPrice).toFixed(2),this.selectRow.inCount=1,this.selectRow.inSubtotal=(this.selectRow.inCount*this.selectRow.inVat).toFixed(2),this.cpDialog=!1,this.lCalculateTotalSubtotal()},handleRowClick1:function(t){this.form.gUnit=t.hName,this.info.hid=t.hid,this.GysDialog=!1},closeDialog1:function(){this.cpDialog=!1},openGys:function(){this.GysDialog=!0,this.selectGysList()},openCp:function(t){this.selectRow=t,this.cpDialog=!0,this.selectBdList()},back1:function(){this.$router.push("/noTender/project")},rest:function(){this.form.gUnit=null,this.GysDialog=!1},lHandleSelectionChange:function(t){this.lSelectedRows=t},bAddRow:function(){var t={};this.bTableColumns.forEach((function(e){t[e.prop]=""})),t.id=this.ComQuotation.length+1,t.bjSecond=this.ComQuotation.length+1,t.hName=this.form.gUnit,this.ComQuotation.push(t)},bDeleteRows:function(){var t=this;this.$confirm("确定删除选中的行吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.ComQuotation=t.ComQuotation.filter((function(e){return!t.bSelectedRows.includes(e)})),t.bSelectedRows=[],t.bUpdateRowIds(),t.$message({type:"success",message:"删除成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},bCopyRows:function(){var t=this,e=this.bSelectedRows.map((function(t){return Object(i["a"])({},t)}));e.forEach((function(e){e.id=t.ComQuotation.reduce((function(t,e){return Math.max(e.id,t)}),0)+1,t.ComQuotation.push(e)}))},bUpdateRowIds:function(){this.ComQuotation.forEach((function(t,e){t.id=e+1}))},bHandleSelectionChange:function(t){this.bSelectedRows=t},bHandleBlur:function(t){t.bjTotal&&(t.bjTotal=parseFloat(t.bjTotal).toFixed(2),isNaN(t.bjTotal)&&(t.bjTotal=null))},bHandleInput:function(t){t.bjTotal=t.bjTotal.replace(/[^\d.]/g,"");var e=t.bjTotal.indexOf(".");-1!==e&&(t.bjTotal=t.bjTotal.slice(0,e+1)+t.bjTotal.slice(e+1).replace(/\./g,""));var n=t.bjTotal.split(".");n[1]&&n[1].length>2&&(t.bjTotal=n[0]+"."+n[1].slice(0,2))}}},m=d,f=(n("fafb"),n("2877")),p=Object(f["a"])(m,a,o,!1,null,"05b80ee2",null);e["default"]=p.exports},ea41:function(t,e,n){},fafb:function(t,e,n){"use strict";n("ea41")}}]);