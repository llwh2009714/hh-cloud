"use strict";(self["webpackChunkruoyi"]=self["webpackChunkruoyi"]||[]).push([[1120,4243,2049],{84243:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",e._g(e._b({attrs:{width:"500px","close-on-click-modal":!1,"modal-append-to-body":!1},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[o("el-row",{attrs:{gutter:15}},[o("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":"100px"}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"生成类型",prop:"type"}},[o("el-radio-group",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.typeOptions,(function(t,n){return o("el-radio-button",{key:n,attrs:{label:t.value,disabled:t.disabled}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),e.showFileName?o("el-form-item",{attrs:{label:"文件名",prop:"fileName"}},[o("el-input",{attrs:{placeholder:"请输入文件名",clearable:""},model:{value:e.formData.fileName,callback:function(t){e.$set(e.formData,"fileName",t)},expression:"formData.fileName"}})],1):e._e()],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.close}},[e._v(" 取消 ")]),o("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v(" 确定 ")])],1)],1)],1)},a=[],i={inheritAttrs:!1,props:["showFileName"],data(){return{formData:{fileName:void 0,type:"file"},rules:{fileName:[{required:!0,message:"请输入文件名",trigger:"blur"}],type:[{required:!0,message:"生成类型不能为空",trigger:"change"}]},typeOptions:[{label:"页面",value:"file"},{label:"弹窗",value:"dialog"}]}},computed:{},watch:{},mounted(){},methods:{onOpen(){this.showFileName&&(this.formData.fileName=+new Date+".vue")},onClose(){},close(e){this.$emit("update:visible",!1)},handleConfirm(){this.$refs.elForm.validate((e=>{e&&(this.$emit("confirm",{...this.formData}),this.close())}))}}},l=i,s=o(81656),r=(0,s.A)(l,n,a,!1,null,null,null),c=r.exports},93849:function(e,t,o){o.r(t),o.d(t,{default:function(){return $}});var n=o(432),a=o.n(n),i=o(39723);const l={itemBtns(e,t,o,n){const{copyItem:a,deleteItem:i}=this.$listeners;return[e("span",{class:"drawing-item-copy",attrs:{title:"复制"},on:{click:e=>{a(t,n),e.stopPropagation()}}},[e("i",{class:"el-icon-copy-document"})]),e("span",{class:"drawing-item-delete",attrs:{title:"删除"},on:{click:e=>{i(o,n),e.stopPropagation()}}},[e("i",{class:"el-icon-delete"})])]}},s={colFormItem(e,t,o,n){const{activeItem:a}=this.$listeners;let s=this.activeId===t.formId?"drawing-item active-from-item":"drawing-item";return this.formConf.unFocusedComponentBorder&&(s+=" unfocus-bordered"),e("el-col",{attrs:{span:t.span},class:s,nativeOn:{click:e=>{a(t),e.stopPropagation()}}},[e("el-form-item",{attrs:{"label-width":t.labelWidth?`${t.labelWidth}px`:null,label:t.label,required:t.required}},[e(i.A,{key:t.renderKey,attrs:{conf:t},on:{input:e=>{this.$set(t,"defaultValue",e)}}})]),l.itemBtns.apply(this,arguments)])},rowFormItem(e,t,o,n){const{activeItem:i}=this.$listeners,s=this.activeId===t.formId?"drawing-row-item active-from-item":"drawing-row-item";let c=r.apply(this,arguments);return"flex"===t.type&&(c=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[c])),e("el-col",{attrs:{span:t.span}},[e("el-row",{attrs:{gutter:t.gutter},class:s,nativeOn:{click:e=>{i(t),e.stopPropagation()}}},[e("span",{class:"component-name"},[t.componentName]),e(a(),{attrs:{list:t.children,animation:340,group:"componentsGroup"},class:"drag-wrapper"},[c]),l.itemBtns.apply(this,arguments)])])}};function r(e,t,o,n){return Array.isArray(t.children)?t.children.map(((o,n)=>{const a=s[o.layout];return a?a.call(this,e,o,n,t.children):c()})):null}function c(){throw new Error(`没有与${this.element.layout}匹配的layout`)}var d,p,u={components:{render:i.A,draggable:a()},props:["element","index","drawingList","activeId","formConf"],render(e){const t=s[this.element.layout];return t?t.call(this,e,this.element,this.index,this.drawingList):c()}},m=u,f=o(81656),h=(0,f.A)(m,d,p,!1,null,null,null),$=h.exports},5814:function(e,t,o){o.r(t),o.d(t,{default:function(){return V}});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"left-board"},[o("div",{staticClass:"logo-wrapper"},[o("div",{staticClass:"logo"},[o("img",{attrs:{src:e.logo,alt:"logo"}}),e._v(" Form Generator ")])]),o("el-scrollbar",{staticClass:"left-scrollbar"},[o("div",{staticClass:"components-list"},[o("div",{staticClass:"components-title"},[o("svg-icon",{attrs:{"icon-class":"component"}}),e._v("输入型组件 ")],1),o("draggable",{staticClass:"components-draggable",attrs:{list:e.inputComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",sort:!1},on:{end:e.onEnd}},e._l(e.inputComponents,(function(t,n){return o("div",{key:n,staticClass:"components-item",on:{click:function(o){return e.addComponent(t)}}},[o("div",{staticClass:"components-body"},[o("svg-icon",{attrs:{"icon-class":t.tagIcon}}),e._v(" "+e._s(t.label)+" ")],1)])})),0),o("div",{staticClass:"components-title"},[o("svg-icon",{attrs:{"icon-class":"component"}}),e._v("选择型组件 ")],1),o("draggable",{staticClass:"components-draggable",attrs:{list:e.selectComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",sort:!1},on:{end:e.onEnd}},e._l(e.selectComponents,(function(t,n){return o("div",{key:n,staticClass:"components-item",on:{click:function(o){return e.addComponent(t)}}},[o("div",{staticClass:"components-body"},[o("svg-icon",{attrs:{"icon-class":t.tagIcon}}),e._v(" "+e._s(t.label)+" ")],1)])})),0),o("div",{staticClass:"components-title"},[o("svg-icon",{attrs:{"icon-class":"component"}}),e._v(" 布局型组件 ")],1),o("draggable",{staticClass:"components-draggable",attrs:{list:e.layoutComponents,group:{name:"componentsGroup",pull:"clone",put:!1},clone:e.cloneComponent,draggable:".components-item",sort:!1},on:{end:e.onEnd}},e._l(e.layoutComponents,(function(t,n){return o("div",{key:n,staticClass:"components-item",on:{click:function(o){return e.addComponent(t)}}},[o("div",{staticClass:"components-body"},[o("svg-icon",{attrs:{"icon-class":t.tagIcon}}),e._v(" "+e._s(t.label)+" ")],1)])})),0)],1)])],1),o("div",{staticClass:"center-board"},[o("div",{staticClass:"action-bar"},[o("el-button",{attrs:{icon:"el-icon-download",type:"text"},on:{click:e.download}},[e._v(" 导出vue文件 ")]),o("el-button",{staticClass:"copy-btn-main",attrs:{icon:"el-icon-document-copy",type:"text"},on:{click:e.copy}},[e._v(" 复制代码 ")]),o("el-button",{staticClass:"delete-btn",attrs:{icon:"el-icon-delete",type:"text"},on:{click:e.empty}},[e._v(" 清空 ")])],1),o("el-scrollbar",{staticClass:"center-scrollbar"},[o("el-row",{staticClass:"center-board-row",attrs:{gutter:e.formConf.gutter}},[o("el-form",{attrs:{size:e.formConf.size,"label-position":e.formConf.labelPosition,disabled:e.formConf.disabled,"label-width":e.formConf.labelWidth+"px"}},[o("draggable",{staticClass:"drawing-board",attrs:{list:e.drawingList,animation:340,group:"componentsGroup"}},e._l(e.drawingList,(function(t,n){return o("draggable-item",{key:t.renderKey,attrs:{"drawing-list":e.drawingList,element:t,index:n,"active-id":e.activeId,"form-conf":e.formConf},on:{activeItem:e.activeFormItem,copyItem:e.drawingItemCopy,deleteItem:e.drawingItemDelete}})})),1),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.drawingList.length,expression:"!drawingList.length"}],staticClass:"empty-info"},[e._v(" 从左侧拖入或点选组件进行表单设计 ")])],1)],1)],1)],1),o("right-panel",{attrs:{"active-data":e.activeData,"form-conf":e.formConf,"show-field":!!e.drawingList.length},on:{"tag-change":e.tagChange}}),o("code-type-dialog",{attrs:{visible:e.dialogVisible,title:"选择生成类型","show-file-name":e.showFileName},on:{"update:visible":function(t){e.dialogVisible=t},confirm:e.generate}}),o("input",{attrs:{id:"copyNode",type:"hidden"}})],1)},a=[],i=(o(28743),o(432)),l=o.n(i),s=o(62418),r=o.n(s),c=o(57576),d=o.n(c),p=o(39723),u=o(32148),m=o(43781),f=o(61981);let h,$;function b(e){return`<el-dialog v-bind="$attrs" v-on="$listeners" @open="onOpen" @close="onClose" title="Dialog Title">\n    ${e}\n    <div slot="footer">\n      <el-button @click="close">取消</el-button>\n      <el-button type="primary" @click="handleConfirm">确定</el-button>\n    </div>\n  </el-dialog>`}function g(e){return`<template>\n    <div>\n      ${e}\n    </div>\n  </template>`}function v(e){return`<script>\n    ${e}\n  <\/script>`}function y(e){return`<style>\n    ${e}\n  </style>`}function _(e,t,o){let n="";"right"!==e.labelPosition&&(n=`label-position="${e.labelPosition}"`);const a=e.disabled?`:disabled="${e.disabled}"`:"";let i=`<el-form ref="${e.formRef}" :model="${e.formModel}" :rules="${e.formRules}" size="${e.size}" ${a} label-width="${e.labelWidth}px" ${n}>\n      ${t}\n      ${w(e,o)}\n    </el-form>`;return $&&(i=`<el-row :gutter="${e.gutter}">\n        ${i}\n      </el-row>`),i}function w(e,t){let o="";return e.formBtns&&"file"===t&&(o='<el-form-item size="large">\n          <el-button type="primary" @click="submitForm">提交</el-button>\n          <el-button @click="resetForm">重置</el-button>\n        </el-form-item>',$&&(o=`<el-col :span="24">\n          ${o}\n        </el-col>`)),o}function x(e,t){return $||24!==e.span?`<el-col :span="${e.span}">\n      ${t}\n    </el-col>`:t}const C={colFormItem(e){let t="";e.labelWidth&&e.labelWidth!==h.labelWidth&&(t=`label-width="${e.labelWidth}px"`);const o=!m.hZ[e.tag]&&e.required?"required":"",n=D[e.tag]?D[e.tag](e):null;let a=`<el-form-item ${t} label="${e.label}" prop="${e.vModel}" ${o}>\n        ${n}\n      </el-form-item>`;return a=x(e,a),a},rowFormItem(e){const t="default"===e.type?"":`type="${e.type}"`,o="default"===e.type?"":`justify="${e.justify}"`,n="default"===e.type?"":`align="${e.align}"`,a=e.gutter?`gutter="${e.gutter}"`:"",i=e.children.map((e=>C[e.layout](e)));let l=`<el-row ${t} ${o} ${n} ${a}>\n      ${i.join("\n")}\n    </el-row>`;return l=x(e,l),l}},D={"el-button":e=>{const{tag:t,disabled:o}=M(e),n=e.type?`type="${e.type}"`:"",a=e.icon?`icon="${e.icon}"`:"",i=e.size?`size="${e.size}"`:"";let l=k(e);return l&&(l=`\n${l}\n`),`<${e.tag} ${n} ${a} ${i} ${o}>${l}</${e.tag}>`},"el-input":e=>{const{disabled:t,vModel:o,clearable:n,placeholder:a,width:i}=M(e),l=e.maxlength?`:maxlength="${e.maxlength}"`:"",s=e["show-word-limit"]?"show-word-limit":"",r=e.readonly?"readonly":"",c=e["prefix-icon"]?`prefix-icon='${e["prefix-icon"]}'`:"",d=e["suffix-icon"]?`suffix-icon='${e["suffix-icon"]}'`:"",p=e["show-password"]?"show-password":"",u=e.type?`type="${e.type}"`:"",m=e.autosize&&e.autosize.minRows?`:autosize="{minRows: ${e.autosize.minRows}, maxRows: ${e.autosize.maxRows}}"`:"";let f=I(e);return f&&(f=`\n${f}\n`),`<${e.tag} ${o} ${u} ${a} ${l} ${s} ${r} ${t} ${n} ${c} ${d} ${p} ${m} ${i}>${f}</${e.tag}>`},"el-input-number":e=>{const{disabled:t,vModel:o,placeholder:n}=M(e),a=e["controls-position"]?`controls-position=${e["controls-position"]}`:"",i=e.min?`:min='${e.min}'`:"",l=e.max?`:max='${e.max}'`:"",s=e.step?`:step='${e.step}'`:"",r=e["step-strictly"]?"step-strictly":"",c=e.precision?`:precision='${e.precision}'`:"";return`<${e.tag} ${o} ${n} ${s} ${r} ${c} ${a} ${i} ${l} ${t}></${e.tag}>`},"el-select":e=>{const{disabled:t,vModel:o,clearable:n,placeholder:a,width:i}=M(e),l=e.filterable?"filterable":"",s=e.multiple?"multiple":"";let r=O(e);return r&&(r=`\n${r}\n`),`<${e.tag} ${o} ${a} ${t} ${s} ${l} ${n} ${i}>${r}</${e.tag}>`},"el-radio-group":e=>{const{disabled:t,vModel:o}=M(e),n=`size="${e.size}"`;let a=E(e);return a&&(a=`\n${a}\n`),`<${e.tag} ${o} ${n} ${t}>${a}</${e.tag}>`},"el-checkbox-group":e=>{const{disabled:t,vModel:o}=M(e),n=`size="${e.size}"`,a=e.min?`:min="${e.min}"`:"",i=e.max?`:max="${e.max}"`:"";let l=A(e);return l&&(l=`\n${l}\n`),`<${e.tag} ${o} ${a} ${i} ${n} ${t}>${l}</${e.tag}>`},"el-switch":e=>{const{disabled:t,vModel:o}=M(e),n=e["active-text"]?`active-text="${e["active-text"]}"`:"",a=e["inactive-text"]?`inactive-text="${e["inactive-text"]}"`:"",i=e["active-color"]?`active-color="${e["active-color"]}"`:"",l=e["inactive-color"]?`inactive-color="${e["inactive-color"]}"`:"",s=!0!==e["active-value"]?`:active-value='${JSON.stringify(e["active-value"])}'`:"",r=!1!==e["inactive-value"]?`:inactive-value='${JSON.stringify(e["inactive-value"])}'`:"";return`<${e.tag} ${o} ${n} ${a} ${i} ${l} ${s} ${r} ${t}></${e.tag}>`},"el-cascader":e=>{const{disabled:t,vModel:o,clearable:n,placeholder:a,width:i}=M(e),l=e.options?`:options="${e.vModel}Options"`:"",s=e.props?`:props="${e.vModel}Props"`:"",r=e["show-all-levels"]?"":':show-all-levels="false"',c=e.filterable?"filterable":"",d="/"===e.separator?"":`separator="${e.separator}"`;return`<${e.tag} ${o} ${l} ${s} ${i} ${r} ${a} ${d} ${c} ${n} ${t}></${e.tag}>`},"el-slider":e=>{const{disabled:t,vModel:o}=M(e),n=e.min?`:min='${e.min}'`:"",a=e.max?`:max='${e.max}'`:"",i=e.step?`:step='${e.step}'`:"",l=e.range?"range":"",s=e["show-stops"]?`:show-stops="${e["show-stops"]}"`:"";return`<${e.tag} ${n} ${a} ${i} ${o} ${l} ${s} ${t}></${e.tag}>`},"el-time-picker":e=>{const{disabled:t,vModel:o,clearable:n,placeholder:a,width:i}=M(e),l=e["start-placeholder"]?`start-placeholder="${e["start-placeholder"]}"`:"",s=e["end-placeholder"]?`end-placeholder="${e["end-placeholder"]}"`:"",r=e["range-separator"]?`range-separator="${e["range-separator"]}"`:"",c=e["is-range"]?"is-range":"",d=e.format?`format="${e.format}"`:"",p=e["value-format"]?`value-format="${e["value-format"]}"`:"",u=e["picker-options"]?`:picker-options='${JSON.stringify(e["picker-options"])}'`:"";return`<${e.tag} ${o} ${c} ${d} ${p} ${u} ${i} ${a} ${l} ${s} ${r} ${n} ${t}></${e.tag}>`},"el-date-picker":e=>{const{disabled:t,vModel:o,clearable:n,placeholder:a,width:i}=M(e),l=e["start-placeholder"]?`start-placeholder="${e["start-placeholder"]}"`:"",s=e["end-placeholder"]?`end-placeholder="${e["end-placeholder"]}"`:"",r=e["range-separator"]?`range-separator="${e["range-separator"]}"`:"",c=e.format?`format="${e.format}"`:"",d=e["value-format"]?`value-format="${e["value-format"]}"`:"",p="date"===e.type?"":`type="${e.type}"`,u=e.readonly?"readonly":"";return`<${e.tag} ${p} ${o} ${c} ${d} ${i} ${a} ${l} ${s} ${r} ${n} ${u} ${t}></${e.tag}>`},"el-rate":e=>{const{disabled:t,vModel:o}=M(e),n=(e.max&&e.max,e["allow-half"]?"allow-half":""),a=e["show-text"]?"show-text":"",i=e["show-score"]?"show-score":"";return`<${e.tag} ${o} ${n} ${a} ${i} ${t}></${e.tag}>`},"el-color-picker":e=>{const{disabled:t,vModel:o}=M(e),n=`size="${e.size}"`,a=e["show-alpha"]?"show-alpha":"",i=e["color-format"]?`color-format="${e["color-format"]}"`:"";return`<${e.tag} ${o} ${n} ${a} ${i} ${t}></${e.tag}>`},"el-upload":e=>{const t=e.disabled?":disabled='true'":"",o=e.action?`:action="${e.vModel}Action"`:"",n=e.multiple?"multiple":"",a="text"!==e["list-type"]?`list-type="${e["list-type"]}"`:"",i=e.accept?`accept="${e.accept}"`:"",l="file"!==e.name?`name="${e.name}"`:"",s=!1===e["auto-upload"]?':auto-upload="false"':"",r=`:before-upload="${e.vModel}BeforeUpload"`,c=`:file-list="${e.vModel}fileList"`,d=`ref="${e.vModel}"`;let p=N(e);return p&&(p=`\n${p}\n`),`<${e.tag} ${d} ${c} ${o} ${s} ${n} ${r} ${a} ${i} ${l} ${t}>${p}</${e.tag}>`}};function M(e){return{vModel:`v-model="${h.formModel}.${e.vModel}"`,clearable:e.clearable?"clearable":"",placeholder:e.placeholder?`placeholder="${e.placeholder}"`:"",width:e.style&&e.style.width?":style=\"{width: '100%'}\"":"",disabled:e.disabled?":disabled='true'":""}}function k(e){const t=[];return e.default&&t.push(e.default),t.join("\n")}function I(e){const t=[];return e.prepend&&t.push(`<template slot="prepend">${e.prepend}</template>`),e.append&&t.push(`<template slot="append">${e.append}</template>`),t.join("\n")}function O(e){const t=[];return e.options&&e.options.length&&t.push(`<el-option v-for="(item, index) in ${e.vModel}Options" :key="index" :label="item.label" :value="item.value" :disabled="item.disabled"></el-option>`),t.join("\n")}function E(e){const t=[];if(e.options&&e.options.length){const o="button"===e.optionType?"el-radio-button":"el-radio",n=e.border?"border":"";t.push(`<${o} v-for="(item, index) in ${e.vModel}Options" :key="index" :label="item.value" :disabled="item.disabled" ${n}>{{item.label}}</${o}>`)}return t.join("\n")}function A(e){const t=[];if(e.options&&e.options.length){const o="button"===e.optionType?"el-checkbox-button":"el-checkbox",n=e.border?"border":"";t.push(`<${o} v-for="(item, index) in ${e.vModel}Options" :key="index" :label="item.value" :disabled="item.disabled" ${n}>{{item.label}}</${o}>`)}return t.join("\n")}function N(e){const t=[];return"picture-card"===e["list-type"]?t.push('<i class="el-icon-plus"></i>'):t.push(`<el-button size="small" type="primary" icon="el-icon-upload">${e.buttonText}</el-button>`),e.showTip&&t.push(`<div slot="tip" class="el-upload__tip">只能上传不超过 ${e.fileSize}${e.sizeUnit} 的${e.accept}文件</div>`),t.join("\n")}function L(e,t){const o=[];h=e,$=e.fields.some((e=>24!==e.span)),e.fields.forEach((e=>{o.push(C[e.layout](e))}));const n=o.join("\n");let a=_(e,n,t);return"dialog"===t&&(a=b(a)),h=null,a}var z=o(25472);const F={"el-rate":".el-rate{display: inline-block; vertical-align: text-top;}","el-upload":".el-upload__tip{line-height: 1.2;}"};function P(e,t){const o=F[t.tag];o&&-1===e.indexOf(o)&&e.push(o),t.children&&t.children.forEach((t=>P(e,t)))}function T(e){const t=[];return e.fields.forEach((e=>P(t,e))),t.join("\n")}var j=[{layout:"colFormItem",tagIcon:"input",label:"手机号",vModel:"mobile",formId:6,tag:"el-input",placeholder:"请输入手机号",defaultValue:"",span:24,style:{width:"100%"},clearable:!0,prepend:"",append:"","prefix-icon":"el-icon-mobile","suffix-icon":"",maxlength:11,"show-word-limit":!0,readonly:!1,disabled:!1,required:!0,changeTag:!0,regList:[{pattern:"/^1(3|4|5|7|8|9)\\d{9}$/",message:"手机号格式错误"}]}],R=o(64111),S=o(84243),B=o(93849);let K,G;var U={components:{draggable:l(),render:p.A,RightPanel:u["default"],CodeTypeDialog:S["default"],DraggableItem:B["default"]},data(){return{logo:R,idGlobal:100,formConf:m.LX,inputComponents:m.LK,selectComponents:m.NQ,layoutComponents:m.HW,labelWidth:100,drawingList:j,drawingData:{},activeId:j[0].formId,drawerVisible:!1,formData:{},dialogVisible:!1,generateConf:null,showFileName:!1,activeData:j[0]}},created(){document.body.ondrop=e=>{e.preventDefault(),e.stopPropagation()}},watch:{"activeData.label":function(e,t){void 0!==this.activeData.placeholder&&this.activeData.tag&&K===this.activeId&&(this.activeData.placeholder=this.activeData.placeholder.replace(t,"")+e)},activeId:{handler(e){K=e},immediate:!0}},mounted(){const e=new(d())("#copyNode",{text:e=>{const t=this.generateCode();return this.$notify({title:"成功",message:"代码已复制到剪切板，可粘贴。",type:"success"}),t}});e.on("error",(e=>{this.$message.error("代码复制失败")}))},methods:{activeFormItem(e){this.activeData=e,this.activeId=e.formId},onEnd(e,t){e.from!==e.to&&(this.activeData=G,this.activeId=this.idGlobal)},addComponent(e){const t=this.cloneComponent(e);this.drawingList.push(t),this.activeFormItem(t)},cloneComponent(e){const t=JSON.parse(JSON.stringify(e));return t.formId=++this.idGlobal,t.span=m.LX.span,t.renderKey=+new Date,t.layout||(t.layout="colFormItem"),"colFormItem"===t.layout?(t.vModel=`field${this.idGlobal}`,void 0!==t.placeholder&&(t.placeholder+=t.label),G=t):"rowFormItem"===t.layout&&(delete t.label,t.componentName=`row${this.idGlobal}`,t.gutter=this.formConf.gutter,G=t),G},AssembleFormData(){this.formData={fields:JSON.parse(JSON.stringify(this.drawingList)),...this.formConf}},generate(e){const t=this[`exec${(0,f.nx)(this.operationType)}`];this.generateConf=e,t&&t(e)},execRun(e){this.AssembleFormData(),this.drawerVisible=!0},execDownload(e){const t=this.generateCode(),o=new Blob([t],{type:"text/plain;charset=utf-8"});this.$download.saveAs(o,e.fileName)},execCopy(e){document.getElementById("copyNode").click()},empty(){this.$confirm("确定要清空所有组件吗？","提示",{type:"warning"}).then((()=>{this.drawingList=[]}))},drawingItemCopy(e,t){let o=JSON.parse(JSON.stringify(e));o=this.createIdAndKey(o),t.push(o),this.activeFormItem(o)},createIdAndKey(e){return e.formId=++this.idGlobal,e.renderKey=+new Date,"colFormItem"===e.layout?e.vModel=`field${this.idGlobal}`:"rowFormItem"===e.layout&&(e.componentName=`row${this.idGlobal}`),Array.isArray(e.children)&&(e.children=e.children.map((e=>this.createIdAndKey(e)))),e},drawingItemDelete(e,t){t.splice(e,1),this.$nextTick((()=>{const e=this.drawingList.length;e&&this.activeFormItem(this.drawingList[e-1])}))},generateCode(){const{type:e}=this.generateConf;this.AssembleFormData();const t=v((0,z.b)(this.formData,e)),o=g(L(this.formData,e)),n=y(T(this.formData));return r().html(o+t+n,f.pu.html)},download(){this.dialogVisible=!0,this.showFileName=!0,this.operationType="download"},run(){this.dialogVisible=!0,this.showFileName=!1,this.operationType="run"},copy(){this.dialogVisible=!0,this.showFileName=!1,this.operationType="copy"},tagChange(e){e=this.cloneComponent(e),e.vModel=this.activeData.vModel,e.formId=this.activeId,e.span=this.activeData.span,delete this.activeData.tag,delete this.activeData.tagIcon,delete this.activeData.document,Object.keys(e).forEach((t=>{void 0!==this.activeData[t]&&typeof this.activeData[t]===typeof e[t]&&(e[t]=this.activeData[t])})),this.activeData=e,this.updateDrawingList(e,this.drawingList)},updateDrawingList(e,t){const o=t.findIndex((e=>e.formId===this.activeId));o>-1?t.splice(o,1,e):t.forEach((t=>{Array.isArray(t.children)&&this.updateDrawingList(e,t.children)}))}}},W=U,q=o(81656),J=(0,q.A)(W,n,a,!1,null,null,null),V=J.exports},25472:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{b:function(){return makeUpJs}});var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(28743),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_utils_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61981),_config__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(43781);const units={KB:"1024",MB:"1024 / 1024",GB:"1024 / 1024 / 1024"};let confGlobal;const inheritAttrs={file:"",dialog:"inheritAttrs: false,"};function makeUpJs(e,t){confGlobal=e=JSON.parse(JSON.stringify(e));const o=[],n=[],a=[],i=[],l=mixinMethod(t),s=[];e.fields.forEach((e=>{buildAttributes(e,o,n,a,l,i,s)}));const r=buildexport(e,t,o.join("\n"),n.join("\n"),a.join("\n"),s.join("\n"),i.join("\n"),l.join("\n"));return confGlobal=null,r}function buildAttributes(e,t,o,n,a,i,l){if(buildData(e,t),buildRules(e,o),e.options&&e.options.length&&(buildOptions(e,n),"dynamic"===e.dataType)){const t=`${e.vModel}Options`,o=(0,_utils_index__WEBPACK_IMPORTED_MODULE_1__.nx)(t);buildOptionMethod(`get${o}`,t,a)}e.props&&e.props.props&&buildProps(e,i),e.action&&"el-upload"===e.tag&&(l.push(`${e.vModel}Action: '${e.action}',\n      ${e.vModel}fileList: [],`),a.push(buildBeforeUpload(e)),e["auto-upload"]||a.push(buildSubmitUpload(e))),e.children&&e.children.forEach((e=>{buildAttributes(e,t,o,n,a,i,l)}))}function mixinMethod(e){const t=[],o={file:confGlobal.formBtns?{submitForm:`submitForm() {\n        this.$refs['${confGlobal.formRef}'].validate(valid => {\n          if(!valid) return\n          // TODO 提交表单\n        })\n      },`,resetForm:`resetForm() {\n        this.$refs['${confGlobal.formRef}'].resetFields()\n      },`}:null,dialog:{onOpen:"onOpen() {},",onClose:`onClose() {\n        this.$refs['${confGlobal.formRef}'].resetFields()\n      },`,close:"close() {\n        this.$emit('update:visible', false)\n      },",handleConfirm:`handleConfirm() {\n        this.$refs['${confGlobal.formRef}'].validate(valid => {\n          if(!valid) return\n          this.close()\n        })\n      },`}},n=o[e];return n&&Object.keys(n).forEach((e=>{t.push(n[e])})),t}function buildData(e,t){if(void 0===e.vModel)return;let o;o="string"!==typeof e.defaultValue||e.multiple?`${JSON.stringify(e.defaultValue)}`:`'${e.defaultValue}'`,t.push(`${e.vModel}: ${o},`)}function buildRules(conf,ruleList){if(void 0===conf.vModel)return;const rules=[];if(_config__WEBPACK_IMPORTED_MODULE_2__.hZ[conf.tag]){if(conf.required){const e=Array.isArray(conf.defaultValue)?"type: 'array',":"";let t=Array.isArray(conf.defaultValue)?`请至少选择一个${conf.vModel}`:conf.placeholder;void 0===t&&(t=`${conf.label}不能为空`),rules.push(`{ required: true, ${e} message: '${t}', trigger: '${_config__WEBPACK_IMPORTED_MODULE_2__.hZ[conf.tag]}' }`)}conf.regList&&Array.isArray(conf.regList)&&conf.regList.forEach((item=>{item.pattern&&rules.push(`{ pattern: ${eval(item.pattern)}, message: '${item.message}', trigger: '${_config__WEBPACK_IMPORTED_MODULE_2__.hZ[conf.tag]}' }`)})),ruleList.push(`${conf.vModel}: [${rules.join(",")}],`)}}function buildOptions(e,t){if(void 0===e.vModel)return;"dynamic"===e.dataType&&(e.options=[]);const o=`${e.vModel}Options: ${JSON.stringify(e.options)},`;t.push(o)}function buildProps(e,t){"dynamic"===e.dataType&&("value"!==e.valueKey&&(e.props.props.value=e.valueKey),"label"!==e.labelKey&&(e.props.props.label=e.labelKey),"children"!==e.childrenKey&&(e.props.props.children=e.childrenKey));const o=`${e.vModel}Props: ${JSON.stringify(e.props.props)},`;t.push(o)}function buildBeforeUpload(e){const t=units[e.sizeUnit];let o="",n="";const a=[];e.fileSize&&(o=`let isRightSize = file.size / ${t} < ${e.fileSize}\n    if(!isRightSize){\n      this.$message.error('文件大小超过 ${e.fileSize}${e.sizeUnit}')\n    }`,a.push("isRightSize")),e.accept&&(n=`let isAccept = new RegExp('${e.accept}').test(file.type)\n    if(!isAccept){\n      this.$message.error('应该选择${e.accept}类型的文件')\n    }`,a.push("isAccept"));const i=`${e.vModel}BeforeUpload(file) {\n    ${o}\n    ${n}\n    return ${a.join("&&")}\n  },`;return a.length?i:""}function buildSubmitUpload(e){const t=`submitUpload() {\n    this.$refs['${e.vModel}'].submit()\n  },`;return t}function buildOptionMethod(e,t,o){const n=`${e}() {\n    // TODO 发起请求获取数据\n    this.${t}\n  },`;o.push(n)}function buildexport(e,t,o,n,a,i,l,s){const r=`${_utils_index__WEBPACK_IMPORTED_MODULE_1__.Cq}{\n  ${inheritAttrs[t]}\n  components: {},\n  props: [],\n  data () {\n    return {\n      ${e.formModel}: {\n        ${o}\n      },\n      ${e.formRules}: {\n        ${n}\n      },\n      ${i}\n      ${a}\n      ${l}\n    }\n  },\n  computed: {},\n  watch: {},\n  created () {},\n  mounted () {},\n  methods: {\n    ${s}\n  }\n}`;return r}},39723:function(e,t,o){o(28743);var n=o(61981);const a=(0,n.pD)("accept,accept-charset,accesskey,action,align,alt,async,autocomplete,autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,name,contenteditable,contextmenu,controls,coords,data,datetime,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,type,usemap,value,width,wrap");function i(e,t,o){t.props.value=o,t.on.input=t=>{e.$emit("input",t)}}const l={"el-button":{default(e,t,o){return t[o]}},"el-input":{prepend(e,t,o){return e("template",{slot:"prepend"},[t[o]])},append(e,t,o){return e("template",{slot:"append"},[t[o]])}},"el-select":{options(e,t,o){const n=[];return t.options.forEach((t=>{n.push(e("el-option",{attrs:{label:t.label,value:t.value,disabled:t.disabled}}))})),n}},"el-radio-group":{options(e,t,o){const n=[];return t.options.forEach((o=>{"button"===t.optionType?n.push(e("el-radio-button",{attrs:{label:o.value}},[o.label])):n.push(e("el-radio",{attrs:{label:o.value,border:t.border}},[o.label]))})),n}},"el-checkbox-group":{options(e,t,o){const n=[];return t.options.forEach((o=>{"button"===t.optionType?n.push(e("el-checkbox-button",{attrs:{label:o.value}},[o.label])):n.push(e("el-checkbox",{attrs:{label:o.value,border:t.border}},[o.label]))})),n}},"el-upload":{"list-type":(e,t,o)=>{const n=[];return"picture-card"===t["list-type"]?n.push(e("i",{class:"el-icon-plus"})):n.push(e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[t.buttonText])),t.showTip&&n.push(e("div",{slot:"tip",class:"el-upload__tip"},["只能上传不超过 ",t.fileSize,t.sizeUnit," 的",t.accept,"文件"])),n}}};t.A={render(e){const t={attrs:{},props:{},on:{},style:{}},o=JSON.parse(JSON.stringify(this.conf)),n=[],s=l[o.tag];return s&&Object.keys(s).forEach((t=>{const a=s[t];o[t]&&n.push(a(e,o,t))})),Object.keys(o).forEach((e=>{const n=o[e];"vModel"===e?i(this,t,o.defaultValue):t[e]?t[e]=n:a(e)?t.attrs[e]=n:t.props[e]=n})),e(this.conf.tag,t,n)},props:["conf"]}}}]);