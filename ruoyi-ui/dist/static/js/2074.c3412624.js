"use strict";(self["webpackChunkruoyi"]=self["webpackChunkruoyi"]||[]).push([[2074],{62074:function(r,e,t){t.r(e),t.d(e,{default:function(){return d}});var s=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("el-form",{ref:"form",attrs:{model:r.user,rules:r.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[t("el-input",{attrs:{placeholder:"请输入旧密码",type:"password","show-password":""},model:{value:r.user.oldPassword,callback:function(e){r.$set(r.user,"oldPassword",e)},expression:"user.oldPassword"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[t("el-input",{attrs:{placeholder:"请输入新密码",type:"password","show-password":""},model:{value:r.user.newPassword,callback:function(e){r.$set(r.user,"newPassword",e)},expression:"user.newPassword"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[t("el-input",{attrs:{placeholder:"请确认新密码",type:"password","show-password":""},model:{value:r.user.confirmPassword,callback:function(e){r.$set(r.user,"confirmPassword",e)},expression:"user.confirmPassword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:r.submit}},[r._v("保存")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:r.close}},[r._v("关闭")])],1)],1)},u=[],o=t(75385),n={data(){const r=(r,e,t)=>{this.user.newPassword!==e?t(new Error("两次输入的密码不一致")):t()};return{user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:r,trigger:"blur"}]}}},methods:{submit(){this.$refs["form"].validate((r=>{r&&(0,o.cO)(this.user.oldPassword,this.user.newPassword).then((r=>{this.$modal.msgSuccess("修改成功")}))}))},close(){this.$tab.closePage()}}},a=n,l=t(81656),i=(0,l.A)(a,s,u,!1,null,null,null),d=i.exports},75385:function(r,e,t){t.d(e,{C$:function(){return y},CZ:function(){return d},F4:function(){return w},IK:function(){return o},TK:function(){return l},VM:function(){return m},bz:function(){return i},cO:function(){return p},e8:function(){return c},ed:function(){return P},eg:function(){return f},nu:function(){return a},rr:function(){return h},wz:function(){return n}});var s=t(35720),u=t(78957);function o(r){return(0,s.Ay)({url:"/system/user/list",method:"get",params:r})}function n(r){return(0,s.Ay)({url:"/system/user/"+(0,u.AL)(r),method:"get"})}function a(r){return(0,s.Ay)({url:"/system/user",method:"post",data:r})}function l(r){return(0,s.Ay)({url:"/system/user",method:"put",data:r})}function i(r){return(0,s.Ay)({url:"/system/user/"+r,method:"delete"})}function d(r,e){const t={userId:r,password:e};return(0,s.Ay)({url:"/system/user/resetPwd",method:"put",data:t})}function c(r,e){const t={userId:r,status:e};return(0,s.Ay)({url:"/system/user/changeStatus",method:"put",data:t})}function m(){return(0,s.Ay)({url:"/system/user/profile",method:"get"})}function f(r){return(0,s.Ay)({url:"/system/user/profile",method:"put",data:r})}function p(r,e){const t={oldPassword:r,newPassword:e};return(0,s.Ay)({url:"/system/user/profile/updatePwd",method:"put",params:t})}function w(r){return(0,s.Ay)({url:"/system/user/profile/avatar",method:"post",data:r})}function h(r){return(0,s.Ay)({url:"/system/user/authRole/"+r,method:"get"})}function y(r){return(0,s.Ay)({url:"/system/user/authRole",method:"put",params:r})}function P(){return(0,s.Ay)({url:"/system/user/deptTree",method:"get"})}}}]);