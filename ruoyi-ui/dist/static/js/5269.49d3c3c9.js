"use strict";(self["webpackChunkruoyi"]=self["webpackChunkruoyi"]||[]).push([[5269],{45269:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":"70px"}},[a("el-col",{attrs:{span:23}},[a("el-row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:30}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"时间",prop:"field101"}},[a("el-date-picker",{style:{width:"100%"},attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","start-placeholder":"年/月/日","end-placeholder":"年/月/日","range-separator":"至",clearable:""},model:{value:e.formData.field101,callback:function(t){e.$set(e.formData,"field101",t)},expression:"formData.field101"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"项目名称",prop:"field108"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"请输入项目名称",clearable:""},model:{value:e.formData.field108,callback:function(t){e.$set(e.formData,"field108",t)},expression:"formData.field108"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{size:"medium"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("right-toolbar",{on:{queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tenderList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"orderNum",width:"80"}}),a("el-table-column",{attrs:{label:"项目编号",align:"center",prop:"sCode",width:"250"}}),a("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"sName",width:"400"}}),a("el-table-column",{attrs:{prop:"sWay",label:"招标方式",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dict-tag",{attrs:{options:e.dict.type.bid_tender_biddingmethod,value:t.row.sWay}})]}}])}),a("el-table-column",{attrs:{label:"项目负责人",align:"center",prop:"sLeader",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sLeader||"——")+" ")]}}])}),a("el-table-column",{attrs:{label:"项目状态",align:"center",prop:"sProjectState",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dict-tag",{attrs:{options:e.dict.type.bid_tender_state,value:t.row.sProjectState}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/tender/update?type=update&sid="+t.row.sid}},[1===t.row.sProjectState?a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"}},[e._v("修改")]):e._e()],1),1===t.row.sProjectState?a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e(),a("router-link",{attrs:{to:"/tender/bidding?type=bidding&sid="+t.row.sid}},[1!=t.row.sProjectState?a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"}},[e._v("进入项目")]):e._e()],1),a("router-link",{attrs:{to:"/tender/details?type=details&sid="+t.row.sid}},[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(e){}}},[e._v("查看")])],1)]}}])}),e._l(e.tableColumns,(function(e){return a("el-table-column",{key:e.prop,attrs:{label:e.label,align:e.align,prop:e.prop,width:e.width}})}))],2),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},r=[],i=(a(28743),a(22937)),s={dicts:["bid_tender_biddingmethod","bid_tender_state"],name:"Tender",data(){return{tableColumns:[],loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,tenderList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,sCode:null,sName:null,sWay:null,sLeader:null,sProjectState:null,sDeadline:null,sid:null,orderNum:0,createTime:null,rangeStartTime:null,rangeEndTime:null},formData:{field101:null,field108:""},rules:{field101:[],field108:[]}}},created(){this.getList()},methods:{query(){this.queryParams.sName=this.formData.field108;let e=this.formData.field101;console.log(e,"range"),e&&(this.queryParams.rangeStartTime=e[0],this.queryParams.rangeEndTime=e[1]),this.queryParams.rangeStartTime=null,this.queryParams.rangeEndTime=null,this.handleQuery(),this.reset()},resetForm(){this.$refs.elForm.resetFields()},getList(){this.loading=!0,this.tenderList=[],(0,i.Lk)(this.queryParams).then((e=>{e.rows.forEach(((e,t)=>{e.orderNum=t+1,this.tenderList.push(e)})),this.total=e.total,this.loading=!1}))},cancel(){this.open=!1,this.reset()},reset(){this.form={orderNum:0,sCode:null,sName:null,sWay:null,sLeader:null,sProjectState:null,sDeadline:null},this.resetForm("form")},handleQuery(){this.queryParams.pageNum=1,this.getList()},resetQuery(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange(e){this.ids=e.map((e=>e.sid)),this.single=1!==e.length,this.multiple=!e.length},handleDelete(e){const t=e.sid||this.ids;this.$modal.confirm('是否确认删除招标项目编号为"'+t+'"的数据项？').then((function(){return(0,i.G2)(t)})).then((()=>{this.getList(),this.$modal.msgSuccess("删除成功")})).catch((()=>{}))}}},n=s,o=a(81656),d=(0,o.A)(n,l,r,!1,null,null,null),u=d.exports}}]);